<div class="container-fluid mt-5">
  <h2>Add a New Recipe</h2>
  <form (ngSubmit)="onSubmit()" #recipeForm="ngForm" [class.was-validated]="isFormSubmitted">
    <div class="form-group mb-4">
      <label for="title">Title <span class="text-danger font-weight-bold">*</span></label>
      <input type="text" class="form-control" id="title" name="title"
        [(ngModel)]="newRecipe.title" required minlength="3" #title="ngModel"
        [class.is-invalid]="recipeForm.getControl(title)?.invalid && recipeForm.getControl(title)?.touched"
        [class.is-valid]="recipeForm.getControl(title)?.valid && recipeForm.getControl(title)?.touched">
        <div *ngIf="recipeForm.getControl(title)?.invalid && (recipeForm.getControl(title)?.dirty || recipeForm.getControl(title)?.touched)" class="text-danger">
          <div *ngIf="recipeForm.controls['title'].errors??['required']">Title is required.</div>
          <div *ngIf="recipeForm.controls['title'].errors??['minlength']">Title must be at least 3 characters long.</div>
        </div>
    </div>
    <div class="form-group mb-4">
      <label for="desc">Description <span class="text-danger font-weight-bold">*</span></label>
      <textarea class="form-control" id="desc" name="desc" [(ngModel)]="newRecipe.desc" required minlength="10" #desc="ngModel"
      [class.is-invalid]="recipeForm.getControl(desc)?.invalid && recipeForm.getControl(desc)?.touched"
      [class.is-valid]="recipeForm.getControl(desc)?.valid && recipeForm.getControl(desc)?.touched">
        </textarea>
        <div *ngIf="recipeForm.getControl(desc)?.invalid && (recipeForm.getControl(desc)?.dirty || recipeForm.getControl(desc)?.touched)" class="text-danger">
          <div *ngIf="recipeForm.controls['desc'].errors??['required']">The Description is required.</div>
          <div *ngIf="recipeForm.controls['desc'].errors??['minlength']">The Description must be at least 10 characters long.</div>
        </div>
    </div>
    <div class="form-group mb-4">
      <label for="timeToComplete">Time to Complete (minutes) <span class="text-danger font-weight-bold">*</span></label>
      <input type="number" class="form-control" id="timeToComplete" name="timeToComplete" [(ngModel)]="newRecipe.timeToComplete" required step="1" min="5" max="100" #timeToComplete="ngModel"
      [class.is-invalid]="recipeForm.getControl(timeToComplete)?.invalid && recipeForm.getControl(timeToComplete)?.touched"
      [class.is-valid]="recipeForm.getControl(timeToComplete)?.valid && recipeForm.getControl(timeToComplete)?.touched">
      <div *ngIf="recipeForm.getControl(timeToComplete)?.invalid && (recipeForm.getControl(timeToComplete)?.dirty || recipeForm.getControl(timeToComplete)?.touched)" class="text-danger">
        <div *ngIf="recipeForm.controls['timeToComplete'].errors??['required']">The Time to Complete is required.</div>
        <div *ngIf="recipeForm.controls['timeToComplete'].errors??['minlength']">The Time to Complete must be at least 5 and at max 100.</div>
      </div>
    </div>
    <div class="my-3">
      <span class="text-danger font-weight-bold">*</span> marks a required field.
    </div>
    <div *ngIf="formValidity" class="text-success font-weight-bold">
      <h3 id="success-heading">Congratulations! You have successfully created a new Recipe!</h3>
    </div>
    <div *ngIf="!formValidity && isFormSubmitted" class="text-danger font-weight-bold">
      <p class="lead">You have entered invalid input. Please check the fields above.</p>
    </div>
    <button type="submit" class="btn btn-primary btn-lg me-3 mb-3">Add Recipe</button>
    <button type="reset" class="btn btn-secondary mb-3" (click)="resetForm()">Reset Form</button>
  </form>

</div>
